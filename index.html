<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Agregar Alumno</title>

	<!-- Bootstrap -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-datepicker.css" rel="stylesheet">
	<link href="css/style_nav.css" rel="stylesheet">
	<style>
		.content {
			margin-top: 80px;
		}
	</style>

	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/bootstrap-datepicker.js"></script>


</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top">
        <?php include("nav.php");?>
    </nav>
    <div class="container" > <!--style="border:1px solid #cecece;"-->
        <div class="d-flex justify-content-center">
                <form class="form" action="" method="post" onsubmit="return validar(event)" >
                    <div class="card" style="width: 50rem;" >
                        <h1 class= "display-4" >Alumnos &raquo; Agregar datos</h1> 
                        <hr />
                        <div class="row g-1">
                            <div class="form-floating col-sm-3">
                                <input type="text" name = "rut" pattern="[0-9]{7,8}-[0-9kK]{1}" class="form-control" id="rut" placeholder="12345678-9"  oninput="checkRut(this)"  required>
                                <label for="rut">RUT</label>
                            </div>
                        </div>
                        </br>
                        <div class="row g-1">
                            <div class="form-floating col-sm-7">
                                <input type="text" name="nombres" class="form-control" id="nombres" placeholder="Nombres" required>
                                <label for="nombres">Nombres</label>
                            </div>
                        </div>    
                        </br>       
                        <div class="row g-2">
                            <div class="form-floating col-sm-5">
                                <input type="text" name="apePat" class="form-control" id="apePat" placeholder="Apellido Paterno" required>
                                <label for="floatingPassword">Apellido Paterno</label>
                            </div>
                            <div class="form-floating col-sm-5">
                                <input type="text" name= "apeMat" class="form-control" id="apeMat" placeholder="Apellido Materno" required>
                                <label for="apePat">Apellido Materno</label>
                            </div>                            
                        </div>  
                        </br>     
                        <div class="row g-2">
                            <div class="form-floating col-sm-3">
                                <label for="fecNac">Fecha de Nacimiento</label>
                                <input type="date" id="fecNac" name="fecNac" class="form-control">
                            </div>
                        </div>                                                        
                    </div>
                </form>
        </div>
	</div>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/bootstrap-datepicker.js"></script>
    <script>
        document.getElementById('fecNac').valueAsDate = new Date();
    </script>

	<script>
        $('.date').datepicker({
            format: 'dd-mm-yyyy',
        })
        function checkRut(rut) {
            // Despejar Puntos
            var valor = rut.value.replace('.','');
            // Despejar Guión
            valor = valor.replace('-','');
            
            // Aislar Cuerpo y Dígito Verificador
            cuerpo = valor.slice(0,-1);
            dv = valor.slice(-1).toUpperCase();
            
            // Formatear RUN
            rut.value = cuerpo + '-'+ dv
            
            // Si no cumple con el mínimo ej. (n.nnn.nnn)
            if(cuerpo.length < 7) { rut.setCustomValidity("RUT Incompleto"); return false;}
            
            // Calcular Dígito Verificador
            suma = 0;
            multiplo = 2;
            
            // Para cada dígito del Cuerpo
            for(i=1;i<=cuerpo.length;i++) {
            
                // Obtener su Producto con el Múltiplo Correspondiente
                index = multiplo * valor.charAt(cuerpo.length - i);
                
                // Sumar al Contador General
                suma = suma + index;
                
                // Consolidar Múltiplo dentro del rango [2,7]
                if(multiplo < 7) { multiplo = multiplo + 1; } else { multiplo = 2; }
        
            }
            
            // Calcular Dígito Verificador en base al Módulo 11
            dvEsperado = 11 - (suma % 11);
            
            // Casos Especiales (0 y K)
            dv = (dv == 'K')?10:dv;
            dv = (dv == 0)?11:dv;
            
            // Validar que el Cuerpo coincide con su Dígito Verificador
            if(dvEsperado != dv) { rut.setCustomValidity("RUT Inválido"); return false; }
            
            // Si todo sale bien, eliminar errores (decretar que es válido)
            rut.setCustomValidity('');
        }
    
	</script>
</body>
</html>    |